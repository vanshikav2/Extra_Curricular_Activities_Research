---
title: "Various Demographic Factors Effect on Students’ Participation In ECA's"
subtitle: "Data Cololected from STA304 Class"
author: 
  - Vanshika Vanshika
  - Navya Hooda
  - Shea
  - Alexia
  - Chloe
  
thanks: "Code and data are available at: https://github.com/vanshikav2/Immigration."
date: today
date-format: long
abstract: "It is known that for university students to have a well-rounded university experience, participation in extra-curricular activities is vital, not only for academic but personal growth. However, student participation in extracurricular activities depends on a number of factors. Some include scheduling and time-commitment factors, commute factors and the diversity of student activities/clubs. This study aims to explore this by investigating the reasons that students select certain extracurricular activities at the University of Toronto Mississauga (UTM) campus. An anonymous online survey on Google Forms was created for students in a third year Statistics course to complete. Findings showed that there was no significant relationship between campus distance and program of study with extra-curricular involvement. From Figure 2, the boxplot shows that there was some gender influence on the participation of extra-curricular activity, however this variation is not statistically relevant as the p-value was 1. Although results did not produce any significant findings, we believe that this is a valiant step in the right direction towards investigating student participation at UTM."
header-includes:
  - \usepackage{amsmath}
  - \usepackage{amssymb}
  - \usepackage{pgfplots}
format: pdf
number-sections: true
toc: true
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(ggplot2)
library(dplyr)
library(readxl)
library(here)
library(reshape2)
data <- read.csv("STA304_TheOutliers_CleanedData.csv")

```


# Introduction

In our study, we were interested in the participation of STA304 students in extracurricular activities (ECAs). In particular, we analyzed if various demographic factors affected students’ participation in ECAs. During the first three weeks of October 2024, we distributed a survey on the STA304 Piazza discussion board in order to collect data on student demographic factors and information on individual participation in ECAs. Our study consisted of three research questions: 

## Research Questions and Hypotheses

1. **Research Question 1**: What is the most preferred type of extracurricular activity, and do demographic factors influence student preferences for certain extracurricular activities?  
   - **Ho**: Student demographic factors have no effect on participation in extracurricular activities.
   - **Ha**: Participation in extracurricular activities is affected by demographic factors.

2. **Research Question 2**: Does proximity to campus affect participation in extracurricular activities?  
   - **Ho**: Proximity to campus has no effect on participation in extracurricular activities.
   - **Ha**: Students living further from campus will have lower participation rates.

3. **Research Question 3**: Does timing/scheduling of extracurricular activities impact student participation in extracurricular activities?  
   - **Ho**: Timing/scheduling of extracurricular activities has no impact on student participation.
   - **Ha**: Participation in extracurricular activities is affected by their timing/scheduling.

The remainder of the research paper will be structured as follows: @sec-data covers data collection and methodology; @sec-data1 presents survey findings and data analysis; @sec-data2 goes over the interpretation of our results; @sec-data3 discusses the study limitations; @sec-data4 concludes the paper; @sec-data5 contains an appendix.  

# Data {#sec-data}

## Methodology

Data collection began in the first three weeks of October 2024, an online anonymous survey on Google Forms was created for students to complete. This survey was created to investigate the reasons that students select and participate in certain ECAs. This online survey was posted to a Piazza thread where students can easily locate the survey link. The sampling method used was Stratified Random Sampling where the strata were the STA304 lecture sections (ie. LEC0101 and LEC0102). Randomness was ensured as the link to the survey was posted to Piazza where everyone had the equal opportunity to complete the survey and be chosen for the study. We collected a sample of 200 students. The survey consisted of 10 questions asking for details on their lecture section, demographic information, program of study, and distance from the UTM campus. We also included questions on the number, types of activities and the time commitment of the ECAs they are involved in. To encourage students to complete our online survey, we asked participants to share a link to their group's survey, which we would complete in return.


# Analysis{#sec-data1}
The majority of the analysis for our research questions is based on the various student demographic factors. As such, it is worthwhile to go over, in a preliminary fashion, the results of our survey to give further background on the study before continuing into the analysis of the research questions. 

There were slightly more responses from LEC0101, approximately a 6:4 ratio LEC0101 to LEC0102.
```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| tbl-cap: "Correlation Analysis"
#| label: p1
library(treemapify)
library(tidyverse)
lecCounts=as.data.frame(table(data$lectureSection))
lecLabs=c("LEC0101", "LEC0102")
ggplot(data=lecCounts, aes(area=Freq, fill=Var1, label=paste(Freq))) + geom_treemap(color="black", size = 1.0) + 
  labs(title="Lecture Section Breakdown", x="Sample Size n = 63") +
  theme_minimal() + 
  scale_fill_brewer(name="Options", labels=lecLabs, palette = "Set2") + 
  geom_treemap_text(colour="black", place="center") + 
  theme(plot.title = element_text(hjust = 0.5))
```


There was a higher percentage of males in the class, approximately a 6:4 ratio, with no students responding Other or Prefer Not to Answer.

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| tbl-cap: "Correlation Analysis"
#| label: p2
all_genderIdents=c("M", "F", "O", "P")
genderCounts=as.data.frame(table(factor(data$genderIdentity, levels= all_genderIdents)))
gendLabs=c("Male", "Female", "Other", "Prefer Not To Say")
ggplot(data=genderCounts, aes(area=Freq, fill=Var1, label=paste(Freq))) + 
    geom_treemap(color="black", size=1.0) + 
    labs(title="Gender Identity Breakdown", x="Sample Size n = 63") + theme_minimal() + 
    scale_fill_brewer(name="Options", labels=gendLabs, palette = "Set2") + 
    geom_treemap_text(colour="black", place="center") + 
    theme(plot.title = element_text(hjust = 0.5))

```

Students picked up to 2 majors, with STA seeing a significant share.

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| tbl-cap: "Correlation Analysis"
#| label: p3
majTab=table(gsub("\\s+", "", unlist(strsplit(data$major,",")))) # Split into Single Items
majDF=as.data.frame(majTab) # Convert to Data Frame
majDF$Var1=fct_relevel(majDF$Var1, c("STA", "MAT", "CSC", "ECO", "LSC", "NLA")) # Refactor for Correct Plot Order
majLabs=c("Applied Staistics", "Mathematics", "Computer Science", "Economics", "Life Sciences (Bio, Chem, Phys)", "Not Listed")
ggplot(data=majDF, aes(x=Var1, y=Freq, fill=Var1)) + 
  geom_bar(stat="identity", color="Black") + 
  labs(x="Majors", y="Count", title = "Majors Breakdown") + 
  theme_light() + 
  scale_fill_brewer(name="Options:", labels=majLabs, palette="Set2") + 
  geom_text(aes(label=Freq), vjust=-.3, color="black") + 
  theme(plot.title = element_text(hjust = 0.5),
        axis.title.y = element_text(size=12, angle=90))
```
We had almost an even balance of Domestic and International students. 
```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| tbl-cap: "Correlation Analysis"
#| label: p4
statusCounts=as.data.frame(table(data$studentStatus))
statusLabs=c("Domestic", "International")
ggplot(data=statusCounts, aes(area=Freq, fill=Var1, label=paste(Freq))) + 
  geom_treemap(color="black", size=1.0) +
  labs(title="Student Status in Canada", x="Total = 63") + theme_minimal() +
  scale_fill_brewer(name="Options", labels=statusLabs, palette = "Set2") + 
  geom_treemap_text(colour="black", place="center")

```

Finally, we recorded students living distance from campus. 

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| tbl-cap: "Correlation Analysis"
#| label: p5
distanceDF=as.data.frame(table(data$campusDistance))
distanceLabs=c("On Campus", "0-5km", "6-10km", "11-15km", "16-20km", "21+km")
ggplot(data=distanceDF, aes(area=Freq, fill=Var1, label=paste(Freq))) + 
  geom_treemap(color="black", size=1.0) + 
  labs(title = "Student Living Distance From Campus", x="Sample Size = 63") +
  theme_minimal() +
  scale_fill_brewer(name="Distance", labels=distanceLabs, palette = "Set2") + 
  geom_treemap_text(color="black", place="center") + 
  theme(plot.title = element_text(hjust = 0.5))
```

## Research Question 1
In RQ1, we analysed what is the most preferred type of extracurricular activity and do demographic factors influence people’s selection or preference for certain extracurricular activities. 

NOTE: For easy analysis and ability to come up with clearer conclusions, the Major column and the activity column were split into different rows.  

For the most preferred type of extracurricular activity, we were able to get the count of students in the different extracurricular activities and display a graph showing the counts of students in each extracurricular activity. 
```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| tbl-cap: "Correlation Analysis"
#| label: r1
activityCount <- data %>% group_by(activityType) %>%
  summarize(count = n()) %>%
  arrange(desc(count))
activityCount
#Graph showing Activity counts
ggplot(data, aes(x = activityType)) +
  geom_bar(fill = "yellow") +
  geom_text(stat = "count", aes(label = ..count..)) + 
  labs(title = "Count of Students by Activity Type", x = "Activity Type", y = "Count") +
  theme_minimal()

```

The most popular extracurricular activity among students was Athletics and Sports (AAS) and the least popular extracurricular activity is Academic Societies (ACS). It was also particularly interesting to observe that most students do not participate in Extracurricular Activities, making the NEC category second in popularity. 

To investigate the proportion of students participating in each activity by demographic factors like major, studentStatus and genderIdentity. These diagrams are able to provide an initial view of how activity participation varies across the different groups. 

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| tbl-cap: "Correlation Analysis"
#| label: r2
proportions_major <- data %>% group_by(major, activityType) %>%
  summarize(count = n(), .groups = "drop") %>%
  group_by(major) %>%
  mutate(proportion = count / sum(count))

print(proportions_major, n = 24)

```

From the visual representation we can see that there is no significant difference in activity participation across majors.  

We also conducted an ANOVA test, and we can see that the boxplot aligns with our results. At a significance level of 0.05, We had an F-Value of 0.646 and a p-value of 0.668 indicating that there was no variation in the activity participation in the different majors to be considered significant.  
```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| tbl-cap: "Correlation Analysis"
#| label: r3
proportions_genderIdentity <- data %>% group_by(genderIdentity, activityType) %>%
  summarize(count = n(), .groups = "drop") %>%
  group_by(genderIdentity) %>%
  mutate(proportion = count / sum(count))

print(proportions_genderIdentity, n = 10)
```

From the Boxplot, we can see that the boxplot for the females is relatively narrow whilst that of the males is wide. We can see that males have a wider range of participation in different activities compared to women. This variation can suggest that there is some gender influence on activity participation. 

After conducting the T-test, at 0.05 significance level, we can conclude that this variation is not statistically significant as the p value is 1 indicating that we accept the null hypothesis that there is no significant difference in the mean proportion of activity participation between females and males. Both genders have the same average participation of 0.2. 

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| tbl-cap: "Correlation Analysis"
#| label: r4
proportions_studentStatus <- data %>% group_by(studentStatus, activityType) %>%
  summarize(count = n(), .groups = "drop") %>%
  group_by(studentStatus) %>%
  mutate(proportion = count / sum(count))

print(proportions_studentStatus, n = 10)

``` 
 
The t-test results show a t value of 0 and a p-value of 1 indicating that there is no significant difference in the mean proportions of activity participation between the two groups. We can also see that the two groups have the same mean proportion of 0.2.  

 

With this, we have observed that there is no significant influence of major, student status and gender on activity participation. It suggests that the choice of extracurricular activities is independent of one’s demographics. 

 
## Research Question 2
In RQ2, we analysed if the proximity to campus affects one’s ability to participate in extracurricular activities. 

+ Null Hypothesis ($H_{o}$): Proximity to campus (campusDistance) does not affect participation in extracurricular activities.
+ Alternative Hypothesis ($H_{1}$): Proximity to campus (campusDistance) has an effect on participation in extracurricular activities.

### Campus Distance and Activity Count
Statistical Test:
To evaluate this, we used the correlation analysis test between campus distance and the number of extracurricular activities using Pearson’s correlation test. Prior to conducting this test, we will verify the assumptions for the test first.

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| tbl-cap: "Correlation Analysis"
#| label: table1


# Create summaries for campusDistance and activityCount
campus <- summary(data$campusDistance)
activity <- summary(data$activityCount)

# Combine the summaries into a data frame
summary_t <- data.frame(
  Statistic = c("Min", "1st Quartile", "Median", "Mean", "3rd Quartile", "Max"),
  CampusDistance = as.numeric(campus),
  ActivityCount = as.numeric(activity)
)

library(knitr)

kable(summary_t, format = "pipe", col.names = c("Statistic", "CampusDistance", "ActivityCount"))
```
The descriptive statistics suggest that most students live fairly close to campus (within 2-3 units) and participate in 1-2 extracurricular activities. This variability in both campusDistance and activityCount supports further analysis to see if there’s a relationship between proximity and participation.


```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| fig-cap: "Scatter Plot"
#| label: fig-plot1
# Load necessary libraries
library(ggplot2)

# Scatter plot with smoothing line to assess linearity
ggplot(data, aes(x = campusDistance, y = activityCount)) +
  geom_point(color ="darkgreen") +
  geom_smooth(method = "lm", col = "orange", se = FALSE) +
  labs(title = "Campus Distance vs. Activity Count with Linear Trend Line",
       x = "Campus Distance",
       y = "Activity Count")

```
Moving on we inspect the relationship between the variables. As it can be seen from @fig-plot1, there seems to be no linear relation between the variables.

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| fig-cap: "Scatter Plot"
#| label: plot2
# Fit preliminary model
model <- lm(activityCount ~ campusDistance, data = data)

# Q-Q plot for normality of residuals
qqnorm(residuals(model))
qqline(residuals(model), col = "red")

```

The Q-Q plot displays how the residuals (differences between observed and fitted values) align with the normal distribution. In this case, residuals do not fully align along the red diagonal line, indicating that normality is somewhat violated. The observed points deviate in a stepwise manner, particularly at the tails, which suggests potential non-normality in residuals.

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| tbl-cap: "Scatter Plot"
#| label: plot3


# Residuals vs Fitted plot to assess homoscedasticity
plot(model, which = 1)


```

This plot helps in identifying any non-linearity, unequal variance (heteroscedasticity), or outliers. Here, residuals seem randomly scattered around the fitted line with no obvious pattern, suggesting homoscedasticity (constant variance). However, a few points like 33, 9, and 15 appear as potential outliers, which might influence the results.


Since there is non-normality between these  variables, we proceed with Spearman's rank correlation to analyze the association between campus distance and activity count. 

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| tbl-cap: "Correlation Test Results"
#| label: tbl-plot4

# Create a data frame to summarize the correlation test results
correlation_results <- data.frame(
  Test = c("Pearson's Correlation", "Spearman's Correlation"),
  Correlation_Coefficient = c(-0.018, 0.025),
  p_value = c(0.891, 0.847),
  Significance = c("Not Significant", "Not Significant")
)


kable(correlation_results, caption = "Summary of Correlation Test Results")

```
The Spearman's rank correlation test results are as follows:

- Spearman correlation coefficient: 0.025
- p-value: 0.847

This result indicates a very weak positive correlation between `campusDistance` and `activityCount`, but it is not statistically significant (p-value > 0.05). Therefore, we fail to reject the null hypothesis, suggesting no significant association between proximity to campus and participation in extracurricular activities based on this data.

## Research Question 3
In RQ3, we analyzed if the the timing, the time spent on extra curricular activity affected one’s level of participation in extracurricular activities. 

+ Null Hypothesis ($H_{o}$): Time Commitment (timeCommitment) does not affect participation levels in extracurricular activities.
+ Alternative Hypothesis ($H_{1}$): Time Commitment (timeCommitment) has an effect on participation levels in extracurricular activities. 

We used the variables of student involvement (studentInvolvement) and activity count (activityCount) to represent the participation levels. 

### Time Commitment and Student Involvement 
**Statistical Test**: 
To evaluate this, we used the correlation analysis test between time commitment and student involvement variables using Spearman’s correlation test. Before proceeding with the test, we will verify the assumptions for the test. 

**Normality of Variables**:
In our exploration we found that the variables of timeCommitment (TC), and studentInvolvement (SI) are not normally distributed as seen by the QQ plots in @fig-normality-of-variables as they deviate from the normality line.
Hence we proceeded to apply the correlation test using the Spearman's rank coefficient instead of Pearson's coefficient (requiring normality).


```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| fig-cap: "Normality of Variables"
#| label: fig-normality-of-variables 
library(rstanarm)

# Set up the plotting area for two plots side by side
par(mfrow = c(1, 2)) 

# QQ plot for timeCommitment
qqnorm(data$timeCommitment, main = "QQ Plot (TC)", xlab = "Theoretical Quantiles", ylab = "Sample Quantiles")
qqline(data$timeCommitment, col = "red")

# QQ plot for studentInvolvement
qqnorm(data$studentInvolvement, main = "QQ Plot (SI)", xlab = "Theoretical Quantiles", ylab = "Sample Quantiles")
qqline(data$studentInvolvement, col = "blue")

# Reset the plotting layout to default (if needed for subsequent plots)
par(mfrow = c(1, 1))

```

**Monotonic Association**:
Next we confirmed the assumption of Spearman's rank coefficient test requiring a monotonic relationship between the variables (timeCommitment and studentInvovlement).
We found that the relationship between these variables was monotonic, specifically increasing as seen in @fig-scatter-plot-involvement.  
```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| fig-cap: "Checking Monotonicity"
#| label: fig-scatter-plot-involvement
# Load necessary libraries
library(ggplot2)

# Create a scatter plot
ggplot(data, aes(x = timeCommitment, y = studentInvolvement)) +
  geom_point(color = "darkgreen") +                             # Set points to green
  geom_smooth(method = "lm", color = "orange", se = FALSE) + # Set line to orange
  ggtitle("Time Commitment and Student Involvement") +
  xlab("Time per week (hrs)") +
  ylab("Involvement (1-10)")


```

**Results**: 
As seen in @tbl-spear-corr, the Spearman's rank correlation coefficient is 0.808, which indicates a strong positive correlation, pointing to a significant monotonic relationship between timeCommitment and studentInvolvement. p-value is < 0.05, hence the correlation is statistically significant, and we can reject the null-hypothesis.
```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| tbl-cap: "Correlation Test Results"
#| label: tbl-spear-corr

# Load the necessary packages
library(knitr)

# Ensure data is defined and contains the necessary columns
# Example: data <- data.frame(timeCommitment = ..., studentInvolvement = ...)

# Perform Spearman's correlation test
result <- cor.test(data$timeCommitment, data$studentInvolvement, method = "spearman", exact = FALSE)

# Extract relevant values
p_value <- sprintf("%.3e", result$p.value)  # Format p-value in scientific notation
rho <- sprintf("%.3f", result$estimate)     # Format rho to 3 decimal places

# Create a data frame for the table
table_results <- data.frame(
  Statistic = c("Spearman Coefficient (rho)", "p-value"),
  Value = c(rho, p_value)
)

# Display the table with basic kable (without additional styling)
kable(table_results, caption = "Spearman's Rank Correlation Results")

```

Hence students who spend more time in the activities have higher participation in extra curricular activities measured by the activity count, as suggested by the strong association based on our data. 


### Time Commitment and Activity Count 

We wanted to check whether the time commitment and participation measured by the activityCount variable were correlated. 

**Statistical Test**:

As discussed before, both the timeCommitment and activityCount variables did not meet normality assumptions, so we proceed with the Spearman's rank correlation coefficient as our statistical test. 

**Normality of Variables**:

To proceed with this test, we used QQ-plots to verify normality of timeCommitment (TC) and activityCount(AC). As seen in @fig-normality-activity they are non-normal variables due to their deviation from the normal line.
```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| fig-cap: "Normality of Variables"
#| label: fig-normality-activity
library(rstanarm)

# Set up the plotting area for two plots side by side
par(mfrow = c(1, 2)) 

# QQ plot for timeCommitment 
qqnorm(data$timeCommitment, main = "QQ Plot (TC)", xlab = "Theoretical Quantiles", ylab = "Sample Quantiles")
qqline(data$timeCommitment, col = "red")

# QQ plot for activity count 
qqnorm(data$activityCount, main = "QQ Plot (AC)", xlab = "Theoretical Quantiles", ylab = "Sample Quantiles")
qqline(data$studentInvolvement, col = "blue")

# Reset the plotting layout to default (if needed for subsequent plots)
par(mfrow = c(1, 1))

```

**Monotonic Association**:
We confirmed that the relationship between these variables was monotonic, specifically increasing as seen in @fig-monotonic-activity 
```{r}
#| label: fig-monotonic-activity
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| fig-cap: "Checking Monotonicity"

# Load necessary libraries
library(ggplot2)

# Create a scatter plot
ggplot(data, aes(x = timeCommitment, y = activityCount)) +
  geom_point(color = "darkgreen") +                             # Set points to green
  geom_smooth(method = "lm", color = "orange", se = FALSE) + # Set line to orange
  ggtitle("Time Commitment and Activity Count") +
  xlab("Time per week (hrs)") +
  ylab("Number of Activities")


```

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| tbl-cap: "Correlation Test Results"
#| label: spear_corr_2

# Load the necessary packages
library(knitr)

# Ensure data is defined and contains the necessary columns
# Example: data <- data.frame(timeCommitment = ..., studentInvolvement = ...)

# Perform Spearman's correlation test
result <- cor.test(data$timeCommitment, data$activityCount, method = "spearman", exact = FALSE)

# Extract relevant values
p_value <- sprintf("%.3e", result$p.value)  # Format p-value in scientific notation
rho <- sprintf("%.3f", result$estimate)     # Format rho to 3 decimal places

# Create a data frame for the table
table_results <- data.frame(
  Statistic = c("Spearman Coefficient (rho)", "p-value"),
  Value = c(rho, p_value)
)

# Display the table with basic kable (without additional styling)
kable(table_results, caption = "Spearman's Rank Correlation Results")

```

**Results**:
The test results show that the coefficient value is 0.937, indicating a strong positive relationship. This would mean as time commitment increases, so does activity count. 
The p-value is < 0.05 and indicates strong evidence against the null hypothesis, hence the relationship is unlikely due to chance. 

Hence, these results indicate a strong, statistically significant monotonic relationship between time commitment and activity count. As students increase their time commitment, so does their participation measured by involvement. 



# Discussion{#sec-data2}
In this study, we sought to identify the factors that significantly contribute to the Gross Domestic Product (GDP) and Inflation Rate. We applied a Bayesian generalized linear model to a dataset encompassing a range of economic indicators over a period of years.





# Limitations{#sec-data3}

This study aimed to understand the reasons why students select and participate in ECAs at UTM. Although our results did not yield significant findings, several limitations may have contributed to this outcome. 

One such notable limitation is the way in which our data was collected. Although we proposed to collect data using a Stratified Random Sample, the data was analysed using a Simple Random Sample. Although randomness was ensured throughout data collection, the data was not analyzed with strata. 

Another notable limitation is the possible selection bias as most participants were of the LEC0101 lecture section. 

In the future studies, we would remove the multi-select option when choosing a program of study and days of the week students participate in activities as it can simplify data analysis by making it easier to categorize and aggregate data. 





\newpage


# References


